<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="google-adsense-account" content="ca-pub-3098807263908139">
  <meta name="googlebot-news" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
  <title>Roam Anguilla - Discover Top Locations & Weekly Events</title>
  <meta name="description" content="Your ultimate guide to Anguilla's best restaurants, beaches, and attractions. Discover weekly events, opening hours, and local favorites with Roam Anguilla." />
  <meta name="keywords" content="Anguilla travel, Anguilla restaurants, Anguilla beaches, Anguilla events, Caribbean travel guide, Anguilla attractions" />
  <meta name="author" content="Roam Anguilla" />
  <meta name="robots" content="index, follow" />
  
  <!-- Open Graph Meta Tags for SEO & Social Sharing -->
  <meta property="og:title" content="Roam Anguilla - Discover Top Locations & Weekly Events" />
  <meta property="og:description" content="Your ultimate guide to Anguilla's best restaurants, beaches, and attractions. Discover weekly events, opening hours, and local favorites." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://roamaxa.app/" />
  <meta property="og:image" content="https://roamaxa.app/WebLogo.webp" />
  <meta property="og:site_name" content="Roam Anguilla" />
  <meta property="og:locale" content="en_US" />
  
  <!-- Twitter Card Meta Tags -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Roam Anguilla - Discover Top Locations & Weekly Events" />
  <meta name="twitter:description" content="Your ultimate guide to Anguilla's best restaurants, beaches, and attractions. Discover weekly events, opening hours, and local favorites." />
  <meta name="twitter:image" content="https://roamaxa.app/WebLogo.webp" />
  <meta name="twitter:site" content="@RoamAnguilla" />
  <meta name="twitter:creator" content="@RoamAnguilla" />
  
  <!-- Additional SEO Meta Tags -->
  <meta name="geo.region" content="AI" />
  <meta name="geo.placename" content="Anguilla" />
  <meta name="geo.position" content="18.220554;-63.068615" />
  <meta name="ICBM" content="18.220554, -63.068615" />
  <meta name="theme-color" content="#4b0082" />
  <meta name="msapplication-TileColor" content="#4b0082" />
  
  <link rel="canonical" href="https://roamaxa.app/" />
  <!-- Favicon for browser tab icon -->
  <link rel="icon" type="image/webp" href="titlelogo.webp" sizes="25x25" />

  <!-- Manifest for PWA install -->
  <link rel="manifest" href="manifest.json" />
  
  <!-- JSON-LD Structured Data for SEO -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "Roam Anguilla",
    "description": "Your ultimate guide to Anguilla's best restaurants, beaches, and attractions. Discover weekly events, opening hours, and local favorites.",
    "url": "https://roamaxa.app/",
    "potentialAction": {
      "@type": "SearchAction",
      "target": "https://roamaxa.app/?search={search_term_string}",
      "query-input": "required name=search_term_string"
    },
    "publisher": {
      "@type": "Organization",
      "name": "Roam Anguilla",
      "url": "https://roamaxa.app/",
      "logo": {
        "@type": "ImageObject",
        "url": "https://roamaxa.app/WebLogo.webp"
      },
      "sameAs": [
        "https://www.tiktok.com/@roamanguilla",
        "https://x.com/RoamAnguilla",
        "https://www.instagram.com/roamanguilla",
        "https://www.youtube.com/@RoamAnguilla",
        "https://www.facebook.com/roamanguilla/"
      ]
    }
  }
  </script>
  
  <style>
  
  * {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}
  
  html {
background: transparent;
  color: white;
  overscroll-behavior: none;
  height: 100% ;
  scroll-behavior: smooth;
  overflow-y: hidden;
}
  body {
      font-family: sans-serif;
      display: flex;
      flex-direction: column;
    }

html, body {
  height: 100%;
  margin: 0;
  overflow: hidden;
}

#placeSection , #eventSection,#favoriteSection,#blogSection, #aboutSection{
  display: flex;
  flex-direction: column;
  height: 100vh;
  padding: 20px;
  box-sizing: border-box;
   margin: 0 0 20px;
   background:transparent;
 
}


#placeList, #eventList {
      flex: 1;
      overflow-y: auto;
      overflow-x:hidden;
      padding: 1rem;
      background: rgba(20,20,30,0.55);
      border-radius: 18px;
      margin: 0 1rem 60px;
      box-shadow: 0 4px 32px 0 rgba(0,0,0,0.22);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      border: 1px solid rgba(255,255,255,0.12);
    }
    
.place {
      padding: 0.75rem;
      margin-bottom: 0.5rem;
      border-bottom: 1px solid rgba(255, 255, 255, 0.2);
      cursor: pointer;
      opacity: 0;
      transform: translateY(20px);
      transition: all 0.4s ease;
    }
    
.event {
      padding: 0.75rem;
      margin-bottom: 0.5rem;
      border-bottom: 1px solid rgba(255, 255, 255, 0.2);
      cursor: pointer;
      opacity: 1;
      transform: translateY(0px);
      transition: all 0.4s ease;
    }
    
.place.visible ,.event.visible{
      opacity: 1;
      transform: translateY(0);
    }
    
.place:hover, .event:hover {
      background: rgba(255, 255, 255, 0.15);
    }
    
.place strong, .event strong {
      display: block;
      font-size: 1.1rem;
      color: #fff;
    }
    
.place span, .event span {
      color: #ddd;
      font-size: 0.9rem;
    }

#placeCard, #eventCard {
  position: fixed;
  top: 20%;
  left: 50%;
  transform: translateX(-50%);
  background: rgba(20,20,30,0.85);
  color: #eee;
  padding: 1.25rem;
  border-radius: 18px;
  box-shadow: 0 4px 32px 0 rgba(0,0,0,0.35);
  z-index: 1000;
  max-width: 340px;
  max-height: 90vh;
  width: 90%;
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border: 1px solid rgba(255,255,255,0.12);
  overflow-y: auto;
}
#placeCard, #eventCard {
  display: grid;
  grid-template-rows: auto auto auto; /* Title, map, amenities */
  row-gap: 1rem;
  padding: 1.25rem;
}

#placeCard iframe {
  width: 100%;
  height: auto; /* Keep map height intrinsic */
  min-height: 180px; /* Maintain desired minimum map height */
  border-radius: 10px;
}

#placeCard h3, #eventCard h3 {
  margin: 0 0 0.75rem;
  font-size: 1.3rem;
  color: #fff;
}

#placeCard img {
  width: 100%;
  height: auto;
  margin-top: 0.5rem;
  border-radius: 10px;
}
/* 1. Ensure the container is positioned */
#placeCard .tag-box {
  position: relative;
  margin-top: 0.5rem;
  padding: 0.75rem 0.5rem 0.5rem;
  background: rgba(20,20,30,0.55);
  border-radius: 12px;
  color: #eee;
  box-shadow: 0 2px 12px 0 rgba(0,0,0,0.12);
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
  border: 1px solid rgba(255,255,255,0.12);
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 0.75rem;
}
/* 2. Show the Amenities header */
#placeCard .tag-box::before {
  content: "Amenities";
  display: inline-block;
  position: absolute;
  top: -0.8em;
  right: 0.75em;
  background: #eee;
  padding: 0 0.25em;
  font-size: 0.85rem;
  color: #444;
}
/* 3. Shrink icons and text */
.tag-icon {
  display: flex;
  flex-direction: column;
  align-items: center;
  font-size: 0.1rem;
  text-align: center;
}
.tag-icon svg {
  width: 0.5em;
  height: 0.5em;
  flex-shrink: 2; /* prevents shrinking in flex grid  [oai_citation:0‡stackoverflow.com](https://stackoverflow.com/questions/46863476/why-divbefore-shows-on-top-of-the-children-element?utm_source=chatgpt.com) [oai_citation:1‡stackoverflow.com](https://stackoverflow.com/questions/74236210/why-is-before-pseudo-element-appearing-on-top-of-the-element?utm_source=chatgpt.com) [oai_citation:2‡stackoverflow.com](https://stackoverflow.com/questions/65803722/svg-shrinks-in-flexbox?utm_source=chatgpt.com) */
}



#searchBarRow {
  display: flex;
  width: 80%;
  max-width:600px;
  margin: 0 auto 1rem;
  background: none !important;
  box-shadow: none !important;
  border: none !important;
  backdrop-filter: none !important;
}

.search-container {
  display: flex;
  width: 100%;
  position: relative;
  border-radius: 15px;
  background: rgba(30,30,40,0.55);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  border: 1px solid rgba(255,255,255,0.12);
  overflow: hidden;
}

#placeSearch {
  width: 100%;
  flex: 1;
  padding: 0.5rem 0.75rem;
  border: none;
  font-size: 1rem;
  background: transparent;
  color: #fff;
  height: 2.5rem;
  box-sizing: border-box;
  outline: none;
}

#typeFilters {
  width: 80%;
  max-width: 600px;
  margin: 0 auto 1rem;
  padding: 0rem 0;
  display: flex;
  gap: 0.5rem;
  overflow-x: auto;
  white-space: nowrap;
  scroll-behavior: smooth;
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none;  /* IE/Edge */
  mask-image: linear-gradient(to right, transparent 0, black 20%, black 80%, transparent 100%);
  -webkit-scrollbar {  display: none; }
  background: none !important;
  box-shadow: none !important;
  border: none !important;
  backdrop-filter: none !important;
}

#typeFilters button {
  flex-shrink: 0;
  white-space: nowrap;
  padding: 0.5rem 0.75rem;
  border: none;
  border-radius: 999px;
  background: #fff;
  color: #4b0082;
  font-weight: bold;
  font-size: 0.85rem;
  transition: background 0.2s ease;
  
}

#typeFilters button:hover {
  background: #e0d4ff;
}

#placeTitle {
    flex-direction: column;
    width: 90%;
    min-height: calc(2.75rem * 2.5 + 0.5rem);
    gap: 0.2rem;
    margin: 0 auto 0.5rem;
  }

#navHorizontal {
 position:sticky;
 display: flex;

 min-width: 100%;
 height: 70px;
 overflow-y: hidden;
 justify-content: center; /* ⭐ centers child grid container */
 align-items: center;
   
 font-size: 1.3rem;
 font-weight: bold;
  background: rgba(20,20,30,0.55);
  box-shadow: 0 4px 32px 0 rgba(0,0,0,0.22);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  border: 1px solid rgba(255,255,255,0.12);
 text-transform: uppercase;
 white-space: nowrap;
 
 opacity:1;
 transition: opacity 0.5s ease, transform 0.5s ease;
 padding: 0 10px;

 z-index: 10; 
}

#logo{
width: 100%;
  max-width: 600px;    /* the largest it should ever grow */
  height: auto;
  align-items: center;
  display: block;
  margin: 0;       /* ensures it's centered */
   
  display: block;
  margin: 0 auto;
  padding: 1rem;
  max-width: 600px;
  height: auto;
  text-align: center;
}

#topBarContainer {
  grid-area:nav;
  display: flex;
  justify-content: center;
  align-items: center;
  max-width: 600px;
  width: 100%;
  gap: 10px;
  overflow-x: auto;
  overflow-y: hidden;
  white-space: nowrap;
  scroll-behavior: smooth;
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none;  
  -webkit-scrollbar {
    display: none;
  }
}

#nav-btn button {
  flex-shrink: 0;
  white-space: nowrap;
  padding: 0.5rem 0.75rem;
  border: none;
  border-radius: 999px;
  background: #fff;
  color: #4b0082;
  font-weight: bold;
  font-size: 0.85rem;
  transition: background 0.3s ease;
  
}

#topBarContainer button:hover {
  background: #e0d4ff;
}

.nav-btn.active {
  background: #fff;
  color: #dabbe2ca;
  border-radius: 12px;
  padding: 0.25rem 0.5rem;
}


#navContainer{
display: grid;
  grid-template-columns: 80px 1fr;
  grid-template-areas: "logo nav";
  align-items: center;
  justify-content: center; /* 🔁 keeps grid centered inside navHorizontal */
  width: 100%;
  max-width: 800px
  
}

#navHorizontal { overflow-x: auto; white-space: nowrap; }
#navHorizontal .nav-btn {
  display: inline-block;
  padding: 0.5rem 1rem;
  cursor: pointer;
  color: #fff;
  text-decoration: none;
  background: none;
  border: none;
  outline: none;
  transition: color 0.2s;
}
#navHorizontal .nav-btn:visited {
  color: #fff;
}
#navHorizontal .nav-btn:focus {
  color: #870bb8;
}
#navHorizontal .nav-btn:hover {
  color: #b01eefaf;
}
#navHorizontal .nav-btn.active {
  background: rgba(255,255,255,0.2);
  border-radius: 8px;
  color: #dabbe2ca;
}
#navHorizontal.dragging {
  cursor: grabbing;
  scroll-behavior: auto;
}



.snap-container {
height: 100vh;
max-height: 100%;
overflow-y: auto;
 
  scroll-snap-type: y mandatory;
  overflow-x: auto;
  white-space: nowrap;
  scroll-behavior: smooth;
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none; /* IE/Edge */
  
#topBarContainer::-webkit-scrollbar {
  display: none;
}
  background: inherit;
}

.snap-container section,
.snap-section {
  scroll-snap-align: start;
  scroll-snap-stop: always;
  min-height: 100vh;
  overflow-x: auto;
  white-space: nowrap;
  scroll-behavior: smooth;
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none;  /* IE/Edge */
}
#typeFilters::-webkit-scrollbar {
  display: none;
}



@media (max-width: 600px) {

#searchBarRow{
    width: 90%;
    max-width:500px;
    margin: 0 auto 0.5rem;
  }

.search-container {
    width: 100%;
    height: 2.75rem;
  }

 #placeSearch {
  height: 2.75rem;
  line-height: 2.75rem;
  padding: 0 0.5rem;
  font-size: 1rem;
  box-sizing: border-box;
  background: transparent;
}

#placeSearch {
  appearance: none;
  -webkit-appearance: none;
  padding-top: 0;
  padding-bottom: 0;
}

#exploreBtn {
    min-width: 60px;
    height: 2.75rem;
  }
  
#typeFilters {
    width: 90%;
    padding: 0.25rem 0; /* REDUCED vertical padding */
    gap: 0.25rem;
    appearance: none;
    
  -webkit-appearance: none;
  padding-top: 0;
  padding-bottom: 0;
  
  }
  
  
#typeFilters button {
    padding: 0.4rem 0.5rem; /* REDUCED */
    font-size: 0.8rem;
  }
  
  #topBarContainer{
   width: 90%;
   display:block;
    padding: 5px 0; /* REDUCED vertical padding */
    gap: 10px;
    appearance: none;
    overflow-x: auto;
  white-space: nowrap;
  scroll-behavior: smooth;
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none;  /* IE/Edge */
  -webkit-scrollbar {  display: none; }
    -webkit-appearance: none;
  }
  
/*end of @Media <600*/ 
}

  </style>
  
  
</head>

<body>

<!-- PWA Install Detection & Prompt Script -->
<script>
let deferredPrompt = null;
let isStandalone = false;

// Detect standalone mode (covers iOS, Android, desktop)
function checkStandalone() {
  return (
    window.matchMedia('(display-mode: standalone)').matches ||
    window.navigator.standalone === true ||
    document.referrer.startsWith('android-app://')
  );
}

function showOpenInAppBanner() {
  // Only show if not in standalone, but installed
  if (checkStandalone()) return;
  // Try to use the Web App Banner API if available in the future
  // For now, show a custom banner
  let banner = document.getElementById('openInAppBanner');
  if (!banner) {
    banner = document.createElement('div');
    banner.id = 'openInAppBanner';
    banner.style = 'position:fixed;bottom:0;left:0;width:100vw;background:rgba(20,20,30,0.95);color:#fff;padding:1rem 2rem;z-index:9999;display:flex;align-items:center;justify-content:center;box-shadow:0 -2px 16px 0 rgba(0,0,0,0.18);font-size:1.1rem;';
    banner.innerHTML = `
      <span style="margin-right:1.5rem;">Already installed? <b>Open in App</b> for the best experience.</span>
      <button id="openAppBtn" class="buttonstyle">Open App</button>
      <button id="closeBannerBtn" class="buttonstyle" style="margin-left:1rem;background:none;color:#fff;font-size:1.5rem;">&times;</button>
    `;
    document.body.appendChild(banner);
    document.getElementById('closeBannerBtn').onclick = () => banner.remove();
    document.getElementById('openAppBtn').onclick = () => {
      // Try to launch the app via URL protocol (works for some platforms)
      window.location.reload(); // fallback: reload, which will open in app if PWA
    };
  }
}

window.addEventListener('beforeinstallprompt', (e) => {
  e.preventDefault();
  deferredPrompt = e;
  // Enable the About section install button
  const btn = document.getElementById('pwaInstallBtn');
  if (btn) btn.disabled = false;
});

document.addEventListener('DOMContentLoaded', function() {
  const btn = document.getElementById('pwaInstallBtn');
  const msg = document.getElementById('pwaInstallMsg');
  // Hide install button if already installed
  if (btn) {
    if (checkStandalone()) {
      btn.style.display = 'none';
      if (msg) { msg.textContent = 'App is already installed!'; msg.style.display = 'block'; }
    } else {
      btn.disabled = !deferredPrompt;
      btn.style.display = 'block';
      btn.onclick = async function() {
        if (deferredPrompt) {
          deferredPrompt.prompt();
          const { outcome } = await deferredPrompt.userChoice;
          if (outcome === 'accepted') {
            btn.style.display = 'none';
            if (msg) { msg.textContent = 'App installed! You can now use it offline.'; msg.style.display = 'block'; }
            // Try to cache latest data after install
            if ('serviceWorker' in navigator && navigator.serviceWorker.controller) {
              navigator.serviceWorker.controller.postMessage({action:'cacheData'});
            }
          } else {
            if (msg) { msg.textContent = 'Install dismissed.'; msg.style.display = 'block'; }
          }
          deferredPrompt = null;
        } else {
          if (msg) { msg.textContent = 'To install, use your browser menu: Add to Home Screen or Install App.'; msg.style.display = 'block'; }
        }
      };
    }
  }

  // Show Open in App banner if not in standalone but installed (best effort)
  if (!checkStandalone() && window.matchMedia('(display-mode: browser)').matches) {
    // Try to detect if app is installed (best effort, not always possible)
    // For now, always show if not in standalone
    showOpenInAppBanner();
  }
});

// Listen for display-mode changes (e.g., user opens in app)
window.matchMedia('(display-mode: standalone)').addEventListener('change', e => {
  if (e.matches) {
    // Hide install button and banner if now in standalone
    const btn = document.getElementById('pwaInstallBtn');
    if (btn) btn.style.display = 'none';
    const msg = document.getElementById('pwaInstallMsg');
    if (msg) { msg.textContent = 'App is already installed!'; msg.style.display = 'block'; }
    const banner = document.getElementById('openInAppBanner');
    if (banner) banner.remove();
  }
});
</script>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3098807263908139"
     crossorigin="anonymous"></script>

<!-- Deep-linking: handle #places, #events, #blog, #about fragments -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  const fragmentToSection = {
    '#places': 'placeSection',
    '#events': 'eventSection',
    '#favorites': 'favoriteSection',
    '#blog': 'blogSection',
    '#about': 'aboutSection'
  };
  const hash = window.location.hash.toLowerCase();
  if (fragmentToSection[hash]) {
    // If not already visible, trigger the Explore button for #places
    if (hash === '#places') {
      const exploreBtn = document.getElementById('exploreBtn');
      if (exploreBtn) exploreBtn.click();
    }
    // Wait a bit for UI to be ready, then scroll
    setTimeout(() => {
      const sec = document.getElementById(fragmentToSection[hash]);
      if (sec) sec.scrollIntoView({ behavior: 'smooth' });
    }, 400);
  }
});
</script>

<script>
document.addEventListener('DOMContentLoaded', function() {
  var video = document.getElementById('herovideo');
  if (!video) return;

  // Keep trying to play until it works
  var playInterval = setInterval(function() {
    if (video.paused) {
      video.muted = true;
      video.defaultMuted = true;
      video.setAttribute('playsinline', '');
      video.setAttribute('webkit-playsinline', '');
      video.play().catch(() => {});
    } else {
      clearInterval(playInterval);
    }
  }, 50);

  // Also try again when video loads
  video.addEventListener('loadeddata', function() {
    if (video.paused) {
      video.play().catch(() => {});
    }
  });

  // Wait 5 seconds, then if video is still paused, simulate a user click to trigger play
  setTimeout(function() {
    if (video.paused) {
      video.muted = true;
      video.defaultMuted = true;
      video.setAttribute('playsinline', '');
      video.setAttribute('webkit-playsinline', '');
      video.dispatchEvent(new Event('click', {bubbles: true, cancelable: true}));
      video.play().catch(() => {});
    }
  }, 5000);

  // Sneaky: hovering over the logo also tries to play the video
  var logo = document.getElementById('logo');
  if (logo) {
    logo.addEventListener('mouseenter', function() {
      if (video.paused) {
        video.muted = true;
        video.defaultMuted = true;
        video.setAttribute('playsinline', '');
        video.setAttribute('webkit-playsinline', '');
        video.play().catch(() => {});
      }
    });
    // Also clicking the logo always tries to play
    logo.addEventListener('click', function() {
      if (video.paused) {
        video.muted = true;
        video.defaultMuted = true;
        video.setAttribute('playsinline', '');
        video.setAttribute('webkit-playsinline', '');
        video.play().catch(() => {});
      }
    });
  }
});
</script>
    
 <div id="heroVideoBg" style="position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:-1;overflow:hidden;pointer-events:none;">
    <video id="herovideo" src="herovideo.mp4" autoplay loop muted playsinline style="width:100vw;height:100vh;object-fit:cover;position:absolute;top:0;left:0;z-index:0;pointer-events:none;background:transparent;"></video>
    <div id="heroBlurOverlay" style="position:absolute;top:0;left:0;width:100vw;height:100vh;z-index:1;backdrop-filter:blur(3.5px);background:rgba(20, 20, 30, 0.55);"></div>
  </div>
  

    <nav id="navHorizontal" aria-label="Main Navigation">
      <div id="navContainer">
        <div id="topBarContainer">
          <a class="nav-btn" href="#places" data-target="placeSection">Places</a>
          <a class="nav-btn" href="#events" data-target="eventSection">Events</a>
          <a class="nav-btn" href="#favorites" data-target="favoriteSection">Favorites</a>
          <a class="nav-btn" href="#blogSection" data-target="blogSection">Blog</a>
          <a class="nav-btn" href="#aboutSection" data-target="aboutSection">About Us</a>
        </div>
      </div>
    </nav>
 
  <div class="snap-container">
  
  
  <!-- 🌟 1. Hero Zone -->
  
    <!-- Permanent video background for the whole app -->
    <style>
      /* Ensure PWA install tile headline and description wrap and stay inside the box */
      #pwaInstallTile h2, #pwaInstallTile p {
        max-width: 100%;
        word-break: break-word;
        white-space: normal;
        display: block;
        text-align: center;
      }
      #heroVideoBg {
        transition: opacity 0.7s cubic-bezier(0.7,0,0.3,1), visibility 0.7s cubic-bezier(0.7,0,0.3,1);
        opacity: 1;
        visibility: visible;
      }
      #heroVideoBg.fade-out {
        opacity: 0;
        visibility: hidden;
        pointer-events: none;
      }
    </style>

   <section id="landingSection" class="snap-section"> 
    <img id="logo" src="WebLogo.webp" alt="WebApp Logo" style="position:relative;z-index:1;">
    <div id="startAdventureBtn" style="text-align: center; cursor: pointer; margin: 20px auto; width: 100%; max-width: 300px;">
      <p style="margin: 0; font-size: 1.2rem;background:rgba(49, 49, 56, 0.709);color: white; font-weight: bold;">Start Your Adventure</p>
    </div>
   </section>


    <section id="placeSection" class="snap-section"> 
    <div id="searchBarRow" style="position:relative;z-index:2;">  
      <div class="search-container">
        <input id="placeSearch" type="text" placeholder=" Search places..." />
        <button id="exploreBtn" class="buttonstyle">Go</button>
      </div>
    </div>
    <!-- 🔍 2. Filter + Search -->
    <div id="typeFilters" ></div>
    <!-- 🗺️ 3. Places List -->
    <div id="placeList" >Loading…</div>
  </section>

  <!-- 🎭 2. Events Section -->
  <section id="eventSection" class="snap-section" >
    <h2>Weekly Events</h2>
    <div id="eventList">Loading…</div>
  </section>

  <!-- ⭐ 3. Favorites Section -->
  <section id="favoriteSection" class="snap-section">
    <h2>Favorites</h2>
    <div id="favoritesList">
      <div id="favoritesContainer">
        <details open>
          <summary class="favorites-summary"><strong>Favorited Locations</strong></summary>
          <ul id="favoritesLocations"></ul>
        </details>
        <details open>
          <summary class="favorites-summary"><strong>Favorited Events</strong></summary>
          <ul id="favoritesEvents"></ul>
        </details>
      </div>
    </div>
  </section>

  <!-- 📝 4. Blog Section -->
  <section id="blogSection" class="snap-section">
    <div></div>
  </section>

  <!-- 👤 5. About Section -->
  <section id="aboutSection" class="snap-section">
    <div style="display: flex; flex-direction: column; align-items: center; justify-content: flex-start; min-height: 300px; margin-top: 2rem;">
      <div id="pwaInstallTile" style="display: flex; flex-direction: column; align-items: center; background: rgba(20,20,30,0.65); border-radius: 18px; box-shadow: 0 4px 32px 0 rgba(0,0,0,0.18); padding: 2rem 2.5rem; margin-bottom: 2rem; max-width: 340px;">
        <img src="titlelogo-192.webp" alt="Roam Anguilla App Icon" style="width: 72px; height: 72px; margin-bottom: 1rem; box-shadow: 0 2px 8px 0 rgba(0,0,0,0.12);" />
        <div style="width: 100%; display: flex; flex-direction: column; align-items: center;">
          <h2 style="color: #fff; font-size: 1.3rem; margin-bottom: 0.5rem; text-align: center;">Click here to download app to desktop/mobile</h2>
          <p style="color: #ccc; font-size: 1rem; margin-bottom: 1.5rem; text-align: center;">Install Roam Anguilla for the best offline experience and quick access from your home screen.</p>
        </div>
        <button id="pwaInstallBtn" class="buttonstyle">Install App</button>
        <div id="pwaInstallMsg" style="color:#ccc; font-size:0.95rem; margin-top:0.75rem; display:none; text-align:center;"></div>
      </div>
    </div>
  </section>

<!-- ::snap-container  -->
</div>
  
<!-- Place and Event Cards -->
<div id="placeCard" style="display:none;"></div>
<div id="eventCard" style="display:none;"></div>


   <!-- Consolidated Navigation Script: drop this before </body> -->
  <script>
  (function() {
    const nav = document.getElementById('navHorizontal');
    const buttons = nav.querySelectorAll('.nav-btn');
    const sections = document.querySelectorAll('.snap-section');

    // Click: scroll and pushState
    buttons.forEach(btn => {
      btn.addEventListener('click', function(e) {
        const sec = document.getElementById(btn.dataset.target);
        if (sec) {
          sec.scrollIntoView({ behavior: 'smooth' });
          // Push state for deep linking
          history.pushState(null, '', btn.getAttribute('href'));
        }
      });
    });

    // IntersectionObserver: highlight active and update URL
    const observer = new IntersectionObserver(entries => {
      entries.forEach(entry => {
        const btn = nav.querySelector(`.nav-btn[data-target="${entry.target.id}"]`);
        if (btn) {
          btn.classList.toggle('active', entry.isIntersecting);
          if (entry.isIntersecting) {
            // Only update URL if not already set
            if (window.location.hash !== btn.getAttribute('href')) {
              history.pushState(null, '', btn.getAttribute('href'));
            }
          }
        }
      });
    }, { threshold: 0.6 });

    sections.forEach(sec => observer.observe(sec));

    // Drag-scroll logic for nav bar
    let isDown = false, startX, scrollStart;
    nav.addEventListener('mousedown', e => {
      isDown = true;
      nav.classList.add('dragging');
      startX = e.pageX;
      scrollStart = nav.scrollLeft;
    });
    ['mouseleave', 'mouseup'].forEach(evt =>
      nav.addEventListener(evt, () => { isDown = false; nav.classList.remove('dragging'); })
    );
    nav.addEventListener('mousemove', e => {
      if (!isDown) return;
      nav.scrollLeft = scrollStart - (e.pageX - startX);
    });
    nav.addEventListener('wheel', e => {
      if (Math.abs(e.deltaY) > Math.abs(e.deltaX)) {
        e.preventDefault();
        nav.scrollLeft += e.deltaY;
      }
    }, { passive: false });

  })();
  </script>

</body>


<!-- Place Script -->
  <script>

  const tagIcons = {
  'order': `
    <div title="Call and Order">
      <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 50 50">
        <path fill="#000000" d="M41 19h-.272a2 2 0 0 0-.266-.365L28.918 6.267c.051-.247.082-.503.082-.767C29 3.567 27.576 2 25.818 2h-3.637C20.424 2 19 3.567 19 5.5c0 .264.032.52.082.767L7.538 18.635a2 2 0 0 0-.266.365H2v7h2v15a5 5 0 0 0 5 5h32a5 5 0 0 0 5-5V26h2v-7zM22.182 9h3.637l.163-.018L35.331 19H12.669l9.35-10.018zM13 40c0 1.1-.9 2-2 2s-2-.9-2-2V28c0-1.1.9-2 2-2s2 .9 2 2zm9 0c0 1.1-.9 2-2 2s-2-.9-2-2V28c0-1.1.9-2 2-2s2 .9 2 2zm10 0c0 1.1-.9 2-2 2s-2-.9-2-2V28c0-1.1.9-2 2-2s2 .9 2 2zm9 0c0 1.1-.9 2-2 2s-2-.9-2-2V28c0-1.1.9-2 2-2s2 .9 2 2z"/>
      </svg>
      <span>Call & Order</span>
    </div>`,
    
     'takeout': `
    <div title="Pick Up Orders">
     <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path fill="#000000" d="M13.325 13q-.8-1.125-2.112-1.562T8.5 11t-2.713.438T3.675 13zM8.5 9q1.15 0 2.338.288t2.2.887t1.737 1.5t.975 2.125q.1.475-.2.837t-.775.363H2.225q-.475 0-.775-.363t-.2-.837q.25-1.225.988-2.125t1.75-1.5t2.187-.888T8.5 9M2 19q-.425 0-.712-.288T1 18t.288-.712T2 17h13q.425 0 .713.288T16 18t-.288.713T15 19zm17.7 4H19q-.425 0-.712-.288T18 22t.288-.712T19 21h.4l1.4-14h-8.6q-.425 0-.712-.288T11.2 6t.288-.712T12.2 5H16V2q0-.425.288-.712T17 1t.713.288T18 2v3h3.9q.45 0 .75.325t.25.775l-1.55 15.45q-.075.625-.55 1.038T19.7 23M18 21h1.4zM2 23q-.425 0-.712-.288T1 22t.288-.712T2 21h13q.425 0 .713.288T16 22t-.288.713T15 23zm6.5-10"/></svg>
      <span>Pick Up & Go</span>
    </div>`,

  'wifi': `
    <div title="Wi-Fi">
      <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512">
        <path fill="#000000" fill-rule="evenodd" d="M331.295 353.764c.131.181-.091-.13 0 0a46 46 0 0 0-1.039-1.365a64 64 0 0 0-3.618-4.17c-3.112-3.302-7.69-7.537-13.87-11.725C300.287 328.047 281.56 320 256 320s-44.287 8.047-56.768 16.504c-6.18 4.188-10.758 8.423-13.87 11.725a64 64 0 0 0-3.618 4.17c.264-.361-.43.544 0 0l-1.586 2.142a16 16 0 0 0 2.135 20.463l62.586 60.5c6.202 5.995 16.039 5.995 22.241 0l62.587-60.5a16 16 0 0 0 2.136-20.463z" clip-rule="evenodd"/>
        <path fill="#000000" fill-rule="evenodd" d="M421.086 269.862c-.135-.218-.596-.966-.812-1.3a72 72 0 0 0-1.81-2.639c-1.552-2.163-3.813-5.096-6.861-8.536c-6.099-6.88-15.362-15.802-28.417-24.637C356.915 214.969 315.967 198 256 198s-100.915 16.969-127.186 34.75c-13.055 8.835-22.318 17.757-28.417 24.637c-3.049 3.44-5.31 6.373-6.861 8.536a71 71 0 0 0-1.81 2.639q-.324.502-.527.829l-.285.471a16 16 0 0 0 2.678 19.664l35.31 34a16 16 0 0 0 23.007-.84l.195-.209c.207-.219.565-.591 1.074-1.096a93 93 0 0 1 4.831-4.436c4.402-3.785 11.093-8.947 19.955-14.141C195.658 292.436 221.893 282 256 282s60.342 10.436 78.036 20.804c8.862 5.194 15.553 10.356 19.955 14.141a93 93 0 0 1 4.831 4.436a49 49 0 0 1 1.269 1.305l-.005-.006l-.013-.015"/>
        <path fill="#000000" d="M507.974 181.264c.343.459 1.181 1.629 1.181 1.629a16 16 0 0 1-2.029 20.606l-36.69 35.5a16 16 0 0 1-23.345-1.17q-.138-.16-.482-.548a108 108 0 0 0-2.197-2.379c-2.009-2.116-5.095-5.229-9.229-9.01c-8.275-7.569-20.69-17.764-36.997-27.981C365.499 177.384 317.58 157 256 157s-109.499 20.384-142.098 40.809c-16.307 10.217-28.722 20.412-36.997 27.981c-4.133 3.781-7.22 6.894-9.229 9.01a109 109 0 0 0-2.197 2.379q-.345.388-.482.548l-.047.054l-.004.006l-.004.005a16 16 0 0 1-23.344 1.169l-36.69-35.5a16 16 0 0 1-2.03-20.606q.295-.413.809-1.103c.686-.92 1.667-2.199 2.949-3.786c2.563-3.174 6.335-7.585 11.367-12.818c10.057-10.46 25.185-24.241 45.783-37.973C105.437 99.146 168.48 72 256 72s150.563 27.146 191.875 54.687c20.598 13.732 35.726 27.513 45.783 37.973c5.032 5.233 8.804 9.644 11.367 12.818a125 125 0 0 1 2.949 3.786"/>
      </svg>
      <span> Wifi </span>
    </div>`,

  'beachaccess': `
    <div title="Beach Access">
      <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 15 15">
        <path fill="#000000" d="m5.36 1.67l-.01 4.02a4.5 4.5 0 0 0-1.1-.11c-.37.1-.74.63-1.1.76a4.2 4.2 0 0 1 2.21-4.67m2.41-.64L9.8 4.48a3.2 3.2 0 0 1 .84-.61c.36-.1.94.17 1.34.11a4.2 4.2 0 0 0-4.21-2.95M1 13h13c-.66-.66-2.64-1.11-4.34-1.33l-1.87-7c.52-.05 1.15.03 1.53 0l-2.11-3.6H7.2a6 6 0 0 0-.7.14a4.4 4.4 0 0 0-.64.22l-.01 4.15c.35-.17.84-.54 1.3-.74l1.8 6.74c-.58-.05-1.09-.08-1.45-.08C6.03 11.5 2 12 1 13"/>
      </svg>
      <span> Beach Access </span>
    </div>`,

  'petfriendly': `
    <div title="Pet Friendly">
      <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 48 48"><path fill="#000000" fill-rule="evenodd" d="M20.555 4.5C19.633 3.524 18.365 3 17 3s-2.633.524-3.555 1.5C12.523 5.475 12 6.843 12 8.444c0 1.583.509 3.17 1.35 4.384C14.182 14.027 15.45 15 17 15s2.819-.973 3.65-2.172c.841-1.213 1.35-2.801 1.35-4.384c0-1.6-.523-2.969-1.445-3.944m-9.01 28.264C13.229 25.87 18.4 21 24 21s10.772 4.871 12.455 11.764c.6 2.452-.35 4.84-2.315 5.927C32.048 39.849 28.78 41 24 41s-8.048-1.15-10.14-2.31c-1.964-1.086-2.914-3.474-2.315-5.926M24 17c-8.038 0-14.379 6.782-16.341 14.815c-.959 3.926.483 8.283 4.264 10.376C14.609 43.678 18.545 45 24 45s9.39-1.322 12.078-2.81c3.78-2.092 5.222-6.45 4.263-10.375C38.379 23.782 32.038 17 24 17M9.555 13.5C8.633 12.524 7.365 12 6 12s-2.633.524-3.555 1.5C1.523 14.475 1 15.843 1 17.444c0 1.583.509 3.17 1.35 4.384C3.18 23.027 4.45 24 6 24s2.819-.973 3.65-2.172c.841-1.213 1.35-2.801 1.35-4.384c0-1.6-.523-2.969-1.445-3.944M42 12c-1.366 0-2.633.524-3.555 1.5c-.922.975-1.445 2.343-1.445 3.944c0 1.583.509 3.17 1.35 4.384C39.18 23.027 40.45 24 42 24s2.819-.973 3.65-2.172c.841-1.213 1.35-2.801 1.35-4.384c0-1.6-.523-2.969-1.445-3.944S43.365 12 42 12M31 3c-1.366 0-2.633.524-3.555 1.5C26.523 5.475 26 6.843 26 8.444c0 1.583.509 3.17 1.35 4.384C28.18 14.027 29.45 15 31 15s2.819-.973 3.65-2.172c.841-1.213 1.35-2.801 1.35-4.384c0-1.6-.523-2.969-1.445-3.944S32.365 3 31 3" clip-rule="evenodd"/></svg>
      <span> Pet Friendly </span>
      </div>`,

  'familyfriendly': `
    <div title="Family Friendly">
      <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24">
        <path fill="#000000" d="M18 6q-.825 0-1.412-.587T16 4t.588-1.412T18 2t1.413.588T20 4t-.587 1.413T18 6m-1 16V10.95h-1.825L16.5 7h3l3 9H20v6zm-4.5-10.5q-.625 0-1.062-.437T11 10t.438-1.062T12.5 8.5t1.063.438T14 10t-.437 1.063t-1.063.437M5.5 6q-.825 0-1.412-.587T3.5 4t.588-1.412T5.5 2t1.413.588T7.5 4t-.587 1.413T5.5 6m-2 16v-7H2V7h7v8H7.5v7zm7.5 0v-4h-1v-5.5h5V18h-1v4z"/>
      </svg>
      <span> Family Friendly </span>
    </div>`,

  'livemusic': `
    <div title="Live Music">
      <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24">
        <g fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5">
          <path d="M1.75.75h20.5s1 0 1 1v2.5s0 1-1 1H1.75s-1 0-1-1v-2.5s0-1 1-1m.5 4.5v18m19.5-18v18"/>
          <path d="m2.25.75l4.5 4.5L12 .75l5.25 4.5l4.5-4.5M12 13.021V19.5M.75 23.25h22.5M8.25 12a1.5 1.5 0 1 0 3 0a1.5 1.5 0 0 0-3 0m6.281 2.17l-3.415-1.55M8.25 23.25L12 19.5l3.75 3.75"/>
        </g>
      </svg>
      <span> Live Music  </span>
    </div>`
};

  async function loadPlaces() {
      const res = await fetch('https://api.npoint.io/779d46d666ced3d99e31');
      if (!res.ok) throw new Error('Failed to fetch places.');
      const places = await res.json();

      const container = document.getElementById('placeList');
      const filterBar = document.getElementById('typeFilters');
      const searchInput = document.getElementById('placeSearch');
      const allPlaceDivs = [];

      container.innerHTML = '';

      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('visible');
          }
        });
      }, { threshold: 0.5 });

      // Unique type buttons
      const typeSet = new Set(places.map(p => p.type).filter(Boolean));
      typeSet.forEach(type => {
        const btn = document.createElement('button');
        btn.textContent = type;
        btn.onclick = () => {
          searchInput.value = "";
          allPlaceDivs.forEach(({ el, data }) => {
            el.style.display = (data.type === type) ? 'block' : 'none';
          });
        };
        filterBar.appendChild(btn);
      });

      // "Show All" button
      const resetBtn = document.createElement('button');
      resetBtn.textContent = "Show All";
      resetBtn.onclick = () => {
        searchInput.value = "";
        allPlaceDivs.forEach(({ el }) => el.style.display = 'block');
      };
      filterBar.appendChild(resetBtn);

      // Place DOM rendering
      places.forEach(p => {
        const div = document.createElement('div');
        div.className = 'place';
        div.innerHTML = `<strong>${p.title}</strong><span>${p.location}</span><br><span>${p.type}</span>`;


div.addEventListener('click', () => {
  currentPlace = p; // Store current place globally
  const card = document.getElementById('placeCard');
  const mapQuery = encodeURIComponent(`${p.title} ${p.location} ${p.type}`);
  const mapEmbed = `
    <iframe
      src="https://www.google.com/maps?q=${mapQuery}&output=embed"
      width="100%"
      height="100%"
      style="border:0; border-radius: 10px; margin-top: 0.5rem;"
      allowfullscreen=""
      loading="lazy"
    ></iframe>`;
    
    const tags = p.tags?.toLowerCase() || '';
const matchedIcons = Object.entries(tagIcons)
  .filter(([label]) => tags.includes(label.toLowerCase()))
  .map(([, icon]) => icon)
  .join('') || '<span>No amenities available</span>';

const iconBox = `
  <div class="amenities-box">
    <div class="amenities-title">Amenities</div>
    <div class="amenities-icons">
      ${matchedIcons}
    </div>
  </div>
`;

  card.innerHTML = `
    <div class="buttonstyle close-btn" onclick="document.getElementById('placeCard').style.display='none'" style="position: absolute; top: 0.75rem; right: 0.75rem; background: none; font-size: 1.25rem; z-index: 20;">✕</div>
    <h3>${p.title}</h3>
    <div class="place-card-details">
      <div class="place-detail"><strong>Location:</strong> ${p.location}</div>
      ${p.type ? `<div class="place-detail"><strong>Type:</strong> ${p.type}</div>` : ''}
      <div class="map-container">${mapEmbed}</div>
    </div>
    ${iconBox}
    <button class="buttonstyle add-to-favorites-btn" onclick="addCurrentPlaceToFavorites()">Add to Favorites</button>
  `;
  card.style.display = 'grid';
});

        container.appendChild(div);
        observer.observe(div);
        allPlaceDivs.push({ el: div, data: p });
        
      });

      // Search filter
      searchInput.addEventListener('input', e => {
        const q = e.target.value.toLowerCase().trim();
        allPlaceDivs.forEach(({ el, data }) => {
          const match = data.title.toLowerCase().includes(q);
          el.style.display = q === "" || match ? 'block' : 'none';
        });
      });
    }

 loadPlaces();
// --- Schema.org JSON-LD automation for Places ---
async function injectPlacesSchema() {
  try {
    const res = await fetch('https://api.npoint.io/779d46d666ced3d99e31');
    if (!res.ok) return;
    const places = await res.json();
    const placeSchemas = places.slice(0, 10).map(p => ({ // Limit to top 10 places for SEO
      '@context': 'https://schema.org',
      '@type': 'TouristAttraction',
      'name': p.title,
      'address': {
        '@type': 'PostalAddress',
        'addressLocality': p.location,
        'addressCountry': 'AI' // Anguilla country code
      },
      'description': `${p.title} in ${p.location}, Anguilla`,
      'url': 'https://roamaxa.app/#places',
      ...(p.type ? { 'additionalType': p.type } : {}),
      ...(p.tags ? { 'amenityFeature': p.tags.split(',').map(t => ({'@type':'LocationFeatureSpecification','name':t.trim()})) } : {}),
      'isAccessibleForFree': true,
      'touristType': ['Families', 'Couples', 'Solo Travelers']
    }));
    
    const script = document.createElement('script');
    script.type = 'application/ld+json';
    script.textContent = JSON.stringify({
      '@context': 'https://schema.org',
      '@type': 'ItemList',
      'name': 'Top Tourist Attractions in Anguilla',
      'description': 'Discover the best places to visit in Anguilla',
      'numberOfItems': placeSchemas.length,
      'itemListElement': placeSchemas.map((place, index) => ({
        '@type': 'ListItem',
        'position': index + 1,
        'item': place
      }))
    }, null, 2);
    document.head.appendChild(script);
  } catch (e) { /* ignore */ }
}
injectPlacesSchema();
  </script>
  
<!-- Event Script -->
  <script>
    async function loadEvents() {
      try {
        const res = await fetch('https://api.npoint.io/0305f0de662a57a9f3a8');
        if (!res.ok) throw new Error('Network error');
        const events = await res.json();
        const container = document.getElementById('eventList');
        container.innerHTML = ''; // clear loading text
        events.forEach(e => {
          const div = document.createElement('div');
          div.className = 'event';
          div.innerHTML = `<strong>${e.name}</strong><span>${e.place}</span>`;
          div.addEventListener('click', () => showEventCard(e));
          container.appendChild(div);
        });
      } catch (err) {
        console.error(err);
        document.getElementById('eventList').innerText = 'Failed to load events.';
      }
    }
    loadEvents();
// Show Event Card Modal
function showEventCard(e) {
  currentEvent = e; // Store current event globally
  const card = document.getElementById('eventCard');
  card.innerHTML = `
    <div class="buttonstyle close-btn" onclick="document.getElementById('eventCard').style.display='none'" style="position: absolute; top: 0.75rem; right: 0.75rem; background: none; font-size: 1.25rem; z-index: 20;">✕</div>
    <h3>${e.name}</h3>
    <div class="event-card-details">
      ${e.eventday ? `<div class="event-detail"><strong>Day:</strong> ${e.eventday}</div>` : ''}
      ${e.eventstart !== undefined ? `<div class="event-detail"><strong>Begins:</strong> ${e.eventstart}:00</div>` : ''}
      ${e.eventend !== undefined ? `<div class="event-detail"><strong>Ends:</strong> ${e.eventend}:00</div>` : ''}
      ${e.place ? `<div class="event-detail"><strong>Location:</strong> ${e.place}</div>` : ''}
      ${e.placeurl ? `<div class="event-detail"><a href="${e.placeurl}" target="_blank" class="event-map-link">View on Map</a></div>` : ''}
    </div>
    ${e.eventdesc ? `<div class="event-description"><em>${e.eventdesc}</em></div>` : ''}
    <button class="buttonstyle add-to-favorites-btn" onclick="addCurrentEventToFavorites()">Add to Favorites</button>
  `;
  card.style.display = 'grid';
}
// --- Schema.org JSON-LD automation for Events ---
async function injectEventsSchema() {
  try {
    const res = await fetch('https://api.npoint.io/0305f0de662a57a9f3a8');
    if (!res.ok) return;
    const events = await res.json();
    const currentWeek = new Date();
    const weeklyEvents = events.slice(0, 8); // Limit to current week's events for SEO
    
    const eventSchemas = weeklyEvents.map(e => ({
      '@context': 'https://schema.org',
      '@type': 'Event',
      'name': e.name,
      'description': e.eventdesc || `Join us for ${e.name} in Anguilla`,
      'url': 'https://roamaxa.app/#events',
      'eventStatus': 'https://schema.org/EventScheduled',
      'eventAttendanceMode': 'https://schema.org/OfflineEventAttendanceMode',
      ...(e.place ? { 
        'location': { 
          '@type': 'Place', 
          'name': e.place,
          'address': {
            '@type': 'PostalAddress',
            'addressCountry': 'AI'
          }
        } 
      } : {}),
      ...(e.eventday && e.eventstart ? {
        'startDate': `2024-01-01T${e.eventstart.padStart(2, '0')}:00:00`,
        'endDate': e.eventend ? `2024-01-01T${e.eventend.padStart(2, '0')}:00:00` : undefined
      } : {}),
      'organizer': {
        '@type': 'Organization',
        'name': 'Roam Anguilla',
        'url': 'https://roamaxa.app/'
      }
    }));
    
    const script = document.createElement('script');
    script.type = 'application/ld+json';
    script.textContent = JSON.stringify({
      '@context': 'https://schema.org',
      '@type': 'EventSeries',
      'name': 'Weekly Events in Anguilla',
      'description': 'Discover the best weekly events happening in Anguilla',
      'url': 'https://roamaxa.app/#events',
      'location': {
        '@type': 'Place',
        'name': 'Anguilla',
        'address': {
          '@type': 'PostalAddress',
          'addressCountry': 'AI'
        }
      },
      'subEvent': eventSchemas
    }, null, 2);
    document.head.appendChild(script);
  } catch (e) { /* ignore */ }
}
injectEventsSchema();
  </script>

<!-- Horizontal Scrolling -->
<script>
function enableHorizontalScroll(wrapper) {
  let isDown = false, startX, scrollStart;

  // Mouse drag
  wrapper.addEventListener('mousedown', e => {
    isDown = true;
    wrapper.classList.add('dragging');
    startX = e.pageX;
    scrollStart = wrapper.scrollLeft;
  });
  ['mouseleave', 'mouseup'].forEach(evt =>
    wrapper.addEventListener(evt, () => { isDown = false; wrapper.classList.remove('dragging'); })
  );
  wrapper.addEventListener('mousemove', e => {
    if (!isDown) return;
    wrapper.scrollLeft = scrollStart - (e.pageX - startX);
  });

  // Wheel scroll
  wrapper.addEventListener('wheel', e => {
    if (Math.abs(e.deltaY) > Math.abs(e.deltaX)) {
      e.preventDefault();
      wrapper.scrollLeft += e.deltaY;
    }
  }, { passive: false });

  // Touch drag (mobile)
  let touchStartX = 0, touchScrollStart = 0.2;
  wrapper.addEventListener('touchstart', e => {
    touchStartX = e.touches[0].pageX;
    touchScrollStart = wrapper.scrollLeft;
  });
  wrapper.addEventListener('touchmove', e => {
    const x = e.touches[0].pageX;
    wrapper.scrollLeft = touchScrollStart - (x - touchStartX);
  });
}
document.addEventListener('DOMContentLoaded', function() {
  const topBar = document.getElementById('topBarContainer');
  const typeFilters = document.getElementById('typeFilters');
  if (topBar) enableHorizontalScroll(topBar);
  if (typeFilters) enableHorizontalScroll(typeFilters);
});
</script>
<!-- Responsive TopBar Nav Centering -->
<script>
const nav = document.getElementById('navHorizontal');
const topBar = document.getElementById('topBarContainer');
const buttons = nav ? nav.querySelectorAll('.nav-btn') : [];
const sections = document.querySelectorAll('.snap-section');

function scrollNavBtnIntoView(btn, align = 'center') {
  if (!topBar || !btn) return;
  btn.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: align });
}

// On nav-btn click: scroll to section and center nav-btn in topBarContainer
buttons.forEach(btn => {
  btn.addEventListener('click', () => {
    const sec = document.getElementById(btn.dataset.target);
    if (sec) sec.scrollIntoView({ behavior: 'smooth' });
    // Center nav-btn in topBarContainer
    scrollNavBtnIntoView(btn, window.innerWidth < 600 ? 'center' : 'start');
  });
});

// On section scroll: center corresponding nav-btn in topBarContainer
const observer = new IntersectionObserver(entries => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      const btn = nav.querySelector(`.nav-btn[data-target="${entry.target.id}"]`);
      if (btn) {
        // Center nav-btn only if user didn't just click (avoid double scroll)
        scrollNavBtnIntoView(btn, window.innerWidth < 600 ? 'center' : 'start');
      }
    }
  });
}, { threshold: 0.6 });
sections.forEach(sec => observer.observe(sec));
</script>



<!-- Scroll Into View -->
<script>
document.querySelectorAll('#navHorizontal .nav-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    const targetId = btn.getAttribute('data-target');
    const section = document.getElementById(targetId);
    if (section) {
      section.scrollIntoView({ behavior: 'smooth' });
    }
  });
});
</script>



<script>
// Favorites logic
function getFavorites() {
  try {
    const stored = localStorage.getItem('favorites');
    if (!stored) return [];
    const parsed = JSON.parse(stored);
    return Array.isArray(parsed) ? parsed : [];
  } catch (error) {
    console.error('Error reading favorites from localStorage:', error);
    return [];
  }
}
function saveFavorites(arr) {
  try {
    localStorage.setItem('favorites', JSON.stringify(arr));
  } catch (error) {
    console.error('Error saving to localStorage:', error);
    alert('Error saving favorites. Your browser may have storage issues.');
  }
}

// Global variables to hold current item data for adding to favorites
let currentPlace = null;
let currentEvent = null;

// Helper functions for adding specific items
function addCurrentPlaceToFavorites() {
  if (currentPlace) {
    addToFavorites({type: "place", data: currentPlace});
  }
}

function addCurrentEventToFavorites() {
  if (currentEvent) {
    addToFavorites({type: "event", data: currentEvent});
  }
}

// Function to delete an item from the favorites
function deleteFromFavorites(itemType, itemIndex) {
  try {
    const arr = getFavorites();
    const filteredItems = arr.filter((item, index) => {
      if (itemType === 'place' && item.type === 'place') {
        return index !== itemIndex;
      } else if (itemType === 'event' && item.type === 'event') {
        return index !== itemIndex;
      }
      return true;
    });
    
    saveFavorites(filteredItems);
    renderFavorites();
    
    const itemTypeName = itemType === 'place' ? 'location' : 'event';
    alert(`${itemTypeName.charAt(0).toUpperCase() + itemTypeName.slice(1)} removed from favorites!`);
  } catch (error) {
    console.error('Error deleting from favorites:', error);
    alert('Error removing item from favorites. Please try again.');
  }
}
function addToFavorites(item) {
  try {
    console.log('Adding to favorites:', item); // Debug logging
    
    if (!item || !item.type || !item.data) {
      console.error('Invalid item structure:', item);
      alert('Error: Invalid item data');
      return;
    }
    
    const arr = getFavorites();
    
    // Check for duplicates with better logic
    const isDuplicate = arr.some(it => {
      if(item.type === 'event' && it.type === 'event') {
        // For events, compare name and place (location) for uniqueness
        return it.data.name === item.data.name && it.data.place === item.data.place;
      } else if(item.type === 'place' && it.type === 'place') {
        // For places, compare title and location for uniqueness
        return it.data.title === item.data.title && it.data.location === item.data.location;
      }
      return false;
    });
    
    if(isDuplicate) {
      const itemName = item.type === 'event' ? item.data.name : item.data.title;
      alert(`"${itemName}" is already in your favorites!`);
      return;
    }
    
    arr.push({...item, added: Date.now()});
    saveFavorites(arr);
    renderFavorites();
    
    const itemName = item.type === 'event' ? item.data.name : item.data.title;
    alert(`"${itemName}" added to favorites!`);
    
    console.log('Successfully added to favorites. Current favorites:', getFavorites()); // Debug logging
  } catch (error) {
    console.error('Error adding to favorites:', error);
    alert('Error adding item to favorites. Please try again.');
  }
}
function renderFavorites() {
  const arr = getFavorites();
  const locations = [], events = [];
  
  // Separate items by type and keep track of original indices
  arr.forEach((it, index) => {
    if(it.type === "place") {
      locations.push({...it, originalIndex: index});
    } else if(it.type === "event") {
      events.push({...it, originalIndex: index});
    }
  });
  
  const makeLocationLi = (it, locationIndex) => `
    <li>
      <div class="favorite-item-content">
        <div class="favorite-item-title">${it.data.title}</div>
        <div class="favorite-item-details">${it.data.location} ${it.data.type ? `• ${it.data.type}` : ''}</div>
      </div>
      <button onclick="deleteFromFavorites('place', ${it.originalIndex})" 
              class="buttonstyle delete-favorite-btn"
              title="Remove from favorites">
        ✕
      </button>
    </li>`;
    
  const makeEventLi = (it, eventIndex) => `
    <li>
      <div class="favorite-item-content">
        <div class="favorite-item-title">${it.data.name}</div>
        <div class="favorite-item-details">
          ${it.data.eventday || ''} ${it.data.eventstart ? `${it.data.eventstart}:00` : ''} ${it.data.eventend ? `- ${it.data.eventend}:00` : ''}
        </div>
        <div class="favorite-item-location">${it.data.place || ''}</div>
      </div>
      <button onclick="deleteFromFavorites('event', ${it.originalIndex})" 
              class="buttonstyle delete-favorite-btn"
              title="Remove from favorites">
        ✕
      </button>
    </li>`;
  
  document.getElementById('favoritesLocations').innerHTML = locations.map((it, index) => makeLocationLi(it, index)).join('') || '<li>No favorited locations</li>';
  document.getElementById('favoritesEvents').innerHTML = events.map((it, index) => makeEventLi(it, index)).join('') || '<li>No favorited events</li>';
}
document.addEventListener('DOMContentLoaded', renderFavorites);
</script>
<style>
/* Universal button style */
.buttonstyle {
  padding: 0.5rem 1rem;
  background: rgba(75, 0, 130, 0.8); /* Opaque purple background */
  color: #fff;
  border: none;
  border-radius: 8px;
  font-size: 1rem;
  cursor: pointer;
  transition: background-color 0.2s ease;
}

.buttonstyle:hover {
  background: rgba(180, 150, 255, 0.9); /* Light purple hover */
}

/* Favorites section styling */
#favoritesList {
  flex: 1;
  overflow-y: auto;
  overflow-x: hidden;
  padding: 1rem;
  background: rgba(20,20,30,0.55);
  border-radius: 18px;
  margin: 0 1rem 60px;
  box-shadow: 0 4px 32px 0 rgba(0,0,0,0.22);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  border: 1px solid rgba(255,255,255,0.12);
}

#favoritesContainer {
  padding: 0.75rem;
}

.favorites-summary {
  padding: 0.75rem;
  margin-bottom: 0.5rem;
  background: rgba(20,20,30,0.55);
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.3s ease;
}

.favorites-summary:hover {
  background: rgba(255,255,255,0.1);
}

#favoritesLocations, #favoritesEvents {
  list-style: none;
  padding: 0.5rem;
  margin: 0 0 1rem 0;
}

#favoritesLocations li, #favoritesEvents li {
  margin: 0.5rem 0;
  padding: 0.75rem;
  border-radius: 8px;
  background: rgba(255,255,255,0.05);
  transition: all 0.3s ease;
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-bottom: 1px solid rgba(255,255,255,0.1);
}

#favoritesLocations li:hover, #favoritesEvents li:hover {
  background: rgba(255,255,255,0.1);
}

/* Unify design between place and event lists */
#placeList, #eventList, #favoritesList {
  flex: 1;
  overflow-y: auto;
  overflow-x: hidden;
  padding: 1rem;
  background: rgba(20,20,30,0.55);
  border-radius: 18px;
  margin: 0 1rem 60px;
  box-shadow: 0 4px 32px 0 rgba(0,0,0,0.22);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  border: 1px solid rgba(255,255,255,0.12);
}

.place, .event {
  padding: 0.75rem;
  margin-bottom: 0.5rem;
  border-radius: 8px;
  background: rgba(255,255,255,0.05);
  cursor: pointer;
  transition: all 0.3s ease;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.place:hover, .event:hover {
  background: rgba(255, 255, 255, 0.15);
}

#favoriteSection h2 {
  text-align: center;
  margin-bottom: 1rem;
}

.favorite-item-content {
  flex: 1;
  overflow: hidden;
}

.favorite-item-title {
  font-weight: bold;
  color: #fff;
  font-size: 1.1rem;
  margin-bottom: 0.3rem;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.favorite-item-details, .favorite-item-location {
  color: #ddd;
  font-size: 0.9rem;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.delete-favorite-btn {
  background: rgba(220, 53, 69, 0.8);
  min-width: 32px;
  height: 32px;
  padding: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.9rem;
  margin-left: 0.5rem;
  flex-shrink: 0;
}

.delete-favorite-btn:hover {
  background: rgba(220, 53, 69, 1);
}

/* Event and Place Card styling */
.place-card-details, .event-card-details {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.place-detail, .event-detail {
  font-size: 0.95rem;
  line-height: 1.4;
}

.map-container {
  margin-top: 0.5rem;
}

.amenities-box {
  margin-top: 0.5rem;
  padding: 1rem;
  background: rgba(255, 255, 255, 0.9);
  border-radius: 10px;
  color: #333;
}

.amenities-title {
  font-weight: bold;
  font-size: 0.9rem;
  margin-bottom: 0.75rem;
}

.amenities-icons {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
  gap: 0.75rem;
  font-size: 0.8rem;
  align-items: center;
}

.event-description {
  background: rgba(255, 255, 255, 0.1);
  padding: 0.75rem;
  border-radius: 8px;
  margin-top: 0.5rem;
  font-size: 0.9rem;
  line-height: 1.5;
}

.event-map-link {
  color: #b19eff;
  text-decoration: none;
  display: inline-block;
  margin-top: 0.25rem;
}

.event-map-link:hover {
  text-decoration: underline;
}

.add-to-favorites-btn {
  margin-top: 1rem;
  justify-self: center;
  width: 100%;
  max-width: 200px;
}

.tag-icon {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  font-size: 0.75rem;
}

.tag-icon svg {
  width: 1.5em;
  height: 1.5em;
  margin-bottom: 0.25rem;
}

/* Mobile optimizations for favorites */
@media (max-width: 600px) {
  #favoritesList {
    margin: 0 0.5rem 50px;
    padding: 0.5rem;
  }
  
  #favoritesContainer {
    padding: 0.5rem;
  }
  
  .favorites-summary {
    padding: 0.5rem;
  }
  
  #favoritesLocations li, #favoritesEvents li {
    padding: 0.5rem;
  }
  
  .favorite-item-title {
    font-size: 1rem;
  }
  
  .favorite-item-details, .favorite-item-location {
    font-size: 0.8rem;
  }
  
  .delete-favorite-btn {
    min-width: 28px;
    height: 28px;
  }
  
  /* Mobile optimizations for cards */
  #placeCard, #eventCard {
    top: 15%;
    padding: 1rem;
    max-width: 320px;
  }
  
  #placeCard h3, #eventCard h3 {
    font-size: 1.2rem;
    margin-bottom: 0.5rem;
  }
  
  .place-detail, .event-detail {
    font-size: 0.85rem;
  }
  
  .amenities-box {
    padding: 0.75rem;
  }
  
  .amenities-icons {
    grid-template-columns: repeat(auto-fill, minmax(70px, 1fr));
    gap: 0.5rem;
  }
  
  .tag-icon {
    font-size: 0.7rem;
  }
  
  .event-description {
    font-size: 0.85rem;
    padding: 0.5rem;
  }
}
</style>

<!-- Start Adventure Button Script -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  // Add click event to the Start Adventure button
  const startBtn = document.getElementById('startAdventureBtn');
  if (startBtn) {
    startBtn.addEventListener('click', function() {
      // Scroll to the placeSection
      const placeSection = document.getElementById('placeSection');
      if (placeSection) {
        placeSection.scrollIntoView({ behavior: 'smooth' });
      }
    });
  }
});
</script>